<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8">
  <title>SocialiniÅ³ valandÅ³ sistema</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">

  <!-- LOGIN -->
  <div id="loginSection">
    <h1>Prisijungimas</h1>
    <input type="text" id="username" placeholder="Vardas / Organizacijos pavadinimas">
    <select id="role">
      <option value="user">Savanoris</option>
      <option value="org">Organizacija</option>
    </select>
    <input type="password" id="orgCode" placeholder="Organizacijos kodas">
    <button onclick="login()">Prisijungti</button>
  </div>

  <!-- ORGANIZACIJOS PANELÄ– -->
  <div id="orgPanel" style="display:none;">
    <h1>Organizacijos panelÄ—</h1>
    <input id="newName" placeholder="Veiklos pavadinimas">
    <input id="newHours" type="number" placeholder="Valandos">
    <input id="newDate" placeholder="Kada">
    <input id="newDesc" placeholder="ApraÅ¡ymas">
    <input id="newLocation" placeholder="Google Maps nuoroda">
    <button onclick="addActivity()">â• PridÄ—ti veiklÄ…</button>
    <button class="logout" onclick="logout()">Atsijungti</button>
  </div>

  <!-- VEIKLOS -->
  <div id="activitiesSection" style="display:none;">
    <h1>SocialinÄ—s veiklos</h1>
    <div class="activities" id="activitiesContainer"></div>
    <button class="logout" onclick="logout()">Atsijungti</button>
  </div>

</div>

<script>
const ORG_CODE = "ORG-1234";

let activities = JSON.parse(localStorage.getItem("activities")) || [
  { name:"Pagalba seneliÅ³ namuose", hours:8, date:"Antradieniais", description:"Bendravimas su senjorais", location:"https://maps.google.com" },
  { name:"Pagalba vaikÅ³ dienos centre", hours:6, date:"Pirmadieniais", description:"Pagalba vaikams", location:"https://maps.google.com" }
];

function saveActivities(){
  localStorage.setItem("activities", JSON.stringify(activities));
}

function login(){
  const name = username.value.trim();
  const r = role.value;
  if(!name) return alert("Ä®vesk vardÄ…");
  if(r==="org" && orgCode.value!==ORG_CODE) return alert("Blogas kodas");

  localStorage.setItem("currentUser", name);
  localStorage.setItem("role", r);
  location.reload();
}

function logout(){
  localStorage.removeItem("currentUser");
  localStorage.removeItem("role");
  location.reload();
}

function addActivity(){
  activities.push({
    name:newName.value,
    hours:newHours.value,
    date:newDate.value,
    description:newDesc.value,
    location:newLocation.value
  });
  saveActivities();
  location.reload();
}

function renderActivities(){
  activitiesContainer.innerHTML="";
  activities.forEach(a=>{
    const div=document.createElement("div");
    div.className="card";
    div.innerHTML=`
      <h3>${a.name}</h3>
      <p><b>Valandos:</b> ${a.hours}</p>
      <p><b>Kada:</b> ${a.date}</p>
      <p>${a.description}</p>
      <a href="${a.location}" target="_blank">ğŸ“ Å½emÄ—lapis</a>
    `;
    activitiesContainer.appendChild(div);
  });
}

const user = localStorage.getItem("currentUser");
const r = localStorage.getItem("role");

if(!user){
  loginSection.style.display="block";
}else if(r==="org"){
  orgPanel.style.display="block";
}else{
  activitiesSection.style.display="block";
  renderActivities();
}
</script>

</body>
</html>
